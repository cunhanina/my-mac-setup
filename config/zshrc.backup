# --- 1. POWERLEVEL10K INSTANT PROMPT (Must be at the top) ---
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# --- 2. PATH CONFIGURATION ---
export ZSH="$HOME/.oh-my-zsh"
# Add your custom bins and the local bin (for uv/python tools)
export PATH="$HOME/bin:$HOME/.local/bin:$PATH"

# --- 3. THEME SELECTION ---
# We use Powerlevel10k because it is the fastest and has the best icons.
source $(brew --prefix)/share/powerlevel10k/powerlevel10k.zsh-theme

# --- 4. PLUGINS ---
# git: Standard git helpers
# zsh-autosuggestions: The grey ghost text you like
plugins=(git zsh-autosuggestions)

# --- 5. INITIALIZE OH-MY-ZSH ---
source $ZSH/oh-my-zsh.sh

# --- 6. ALIASES & FUNCTIONS ---
# Use 'bat' instead of 'cat' for files (Pretty colors)
if command -v bat &>/dev/null; then
  alias cat="bat"
fi

# Project Jump function
pj() { cd "$($HOME/bin/pj $@)" }

# --- 7. TOOL INITIALIZATION ---
# Pyenv (Python Version Manager) - kept for compatibility
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
if command -v pyenv 1>/dev/null 2>&1; then
  eval "$(pyenv init --path)"
  eval "$(pyenv init -)"
fi

# --- 8. P10K CONFIGURATION (Must be at the bottom) ---
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
